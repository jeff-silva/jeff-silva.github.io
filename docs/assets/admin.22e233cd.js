import{_ as F}from"./lodash.fb661e38.js";import{c as M,t as d,R as m,A as s,z as a,al as j,v as C,Q as G,P as L,aB as H,aq as U,K as v,L as $,B as c,y as I,aC as q,O as S,S as y,E as N,M as T,ap as B,J as w,x as r,ak as A,a2 as J,a3 as z,G as V,a0 as K,aD as Q,ai as D,a1 as W,az as X,$ as h,I as n,V as x,W as R}from"./entry.f7b8b78c.js";import{a as Y,u as E}from"./useVuetifyThemeSwitcher.f63326df.js";import{u as Z}from"./useFireAuth.40c04767.js";import"./index.esm.d7c11a2d.js";const O={__name:"nav",props:{items:{type:Array,default:()=>[]},deep:{type:Number,default:0}},setup(P){const f=P,k=t=>F.isPlainObject(t),g=t=>(t={title:"",to:null,icon:null,bind:{},condition:()=>!0,children:[],...t},t.to&&(t.bind.to=t.to),t.icon&&(t.bind.prependIcon=t.icon),t),l=M(()=>f.items.map(g));return(t,b)=>{const _=O;return f.deep==0?(d(),m(j,{key:0,density:"compact"},{default:s(()=>[a(_,{items:l.value,deep:f.deep+1},null,8,["items","deep"])]),_:1})):(d(!0),C(L,{key:1},G(l.value,(e,o)=>(d(),C(L,null,[k(e)?e.children.length>0?(d(),m(q,{key:1},{activator:s(i=>[a(U,v($({...i.props,...e.bind})),{default:s(()=>[c(I(e.title),1)]),_:2},1040)]),default:s(()=>[a(_,{items:e.children,deep:f.deep+1},null,8,["items","deep"])]),_:2},1024)):(d(),C(L,{key:2},[e.condition(e)?(d(),m(U,v(S({key:0},e.bind)),{default:s(()=>[c(I(e.title),1)]),_:2},1040)):y("",!0)],64)):(d(),m(H,{key:0}))],64))),256))}}};const ee={class:"w-100 d-flex align-center justify-center"},te={class:"text-left",style:{"min-width":"300px"}},ae={class:"mt-4 d-flex flex-column",style:{gap:"10px"}},se={class:"d-flex flex-column px-5 py-3",style:{gap:"20px",height:"100vh"}},le={class:"app-layout__box d-flex align-center",style:{gap:"10px"}},oe={class:"app-layout__box",style:{"overflow-y":"auto","overflow-x":"hidden","flex-grow":"1"}},ne={__name:"layout",props:{ready:{type:Boolean,default:!0},view:{type:String,default:"admin"},defaultsProvider:{type:Object,default:()=>({})}},emits:["update:view"],setup(P,{expose:f,emit:k}){const g=P,l=N({name:g.view,set(o){t("update:view",o),l.name=o}}),t=k;Y(),E();const b=N({drawer:null,items:[{title:"Home",to:"/admin"},{title:"Pages",to:"/admin/page"},{title:"User",to:"/admin/user"},{title:"Test",to:"/admin/test"}]}),_={...g.defaultsProvider},e=(o={})=>({defaultsProvider:_,view:l,...o});return f({view:l}),(o,i)=>(d(),m(D,{class:"app-layout"},{default:s(()=>[a(T,{defaults:_},{default:s(()=>[g.ready?y("",!0):(d(),m(B,{key:0},{default:s(()=>[w(o.$slots,"loading",v($(e())),()=>[r("div",ee,[a(A,{icon:"svg-spinners:3-dots-fade",size:"30"})])])]),_:3})),g.ready&&l.name!="admin"?(d(),m(B,{key:1},{default:s(()=>[a(J,null,{default:s(()=>[a(z,{cols:"12",md:"6",class:"app-layout__bg-pattern"}),a(z,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:s(()=>[r("div",te,[l.name=="login"?w(o.$slots,"login",v(S({key:0},e())),()=>[c(" Login ")]):y("",!0),l.name=="register"?w(o.$slots,"register",v(S({key:1},e())),()=>[c(" Register ")]):y("",!0),l.name=="password"?w(o.$slots,"password",v(S({key:2},e())),()=>[c(" Password ")]):y("",!0),r("div",ae,[l.name!="login"?(d(),m(V,{key:0,block:"","prepend-icon":"material-symbols:key-outline",onClick:i[0]||(i[0]=u=>l.set("login"))},{default:s(()=>[c(" Login ")]),_:1})):y("",!0),l.name!="register"?(d(),m(V,{key:1,block:"","prepend-icon":"material-symbols:person-add-outline",onClick:i[1]||(i[1]=u=>l.set("register"))},{default:s(()=>[c(" Register ")]),_:1})):y("",!0),l.name!="password"?(d(),m(V,{key:2,block:"","prepend-icon":"fluent:key-reset-24-regular",onClick:i[2]||(i[2]=u=>l.set("password"))},{default:s(()=>[c(" Password ")]),_:1})):y("",!0)])])]),_:3})]),_:3})]),_:3})):y("",!0),g.ready&&l.name=="admin"?(d(),m(B,{key:2,class:"rounded rounded-md"},{default:s(()=>[a(K,{modelValue:b.drawer,"onUpdate:modelValue":i[3]||(i[3]=u=>b.drawer=u),width:"300"},{default:s(()=>[w(o.$slots,"navigation",v($(e())))]),_:3},8,["modelValue"]),a(Q,null,{default:s(()=>[r("div",se,[a(T,{defaults:{VBtn:{flat:!0,size:30}}},{default:s(()=>[r("div",le,[a(V,{icon:"ci:hamburger",size:"30",flat:"",onClick:i[4]||(i[4]=u=>b.drawer=!b.drawer),class:"d-lg-none"}),w(o.$slots,"header",v($(e())))])]),_:3}),r("div",oe,[w(o.$slots,"main",v($(e())))])])]),_:3})]),_:3})):y("",!0)]),_:3})]),_:3}))}},de={class:"d-flex align-center"},ie={class:"me-2"},re={class:"d-flex"},ue={class:"d-flex"},pe={class:"d-flex"},ge={__name:"admin",async setup(P){let f,k;const g=X(),l=E(),t=([f,k]=W(()=>Z()),f=await f,k(),f);t.on("authChange",()=>{console.log(g.ctx.$refs.appLayoutRef.view.set(t.user?"admin":"login")),console.log(t.user)});const b=N({drawer:null,items:[{title:"Home",to:"/admin"},{title:"Pages",to:"/admin/page"},{title:"User",to:"/admin/user"},{title:"Test",to:"/admin/test"}]});return(_,e)=>{const o=O,i=ne;return d(),m(D,{class:"layout-admin"},{default:s(()=>[a(i,{ref:"appLayoutRef","defaults-provider":_.defaultsProvider,ready:n(t).ready},{main:s(u=>[w(_.$slots,"main",v($(u)))]),navigation:s(u=>[a(j,null,{default:s(()=>[a(U,{title:"Navigation drawer"})]),_:1}),a(o,{items:b.items},null,8,["items"])]),header:s(u=>[a(h),r("div",de,[r("div",ie,I(n(t).user.name),1),a(A,{icon:"material-symbols:account-circle"})]),a(V,{onClick:e[0]||(e[0]=p=>n(l).switch()),icon:"material-symbols:dark-mode"})]),login:s(u=>[r("form",{onSubmit:e[3]||(e[3]=R(p=>n(t).login(),["prevent"]))},[a(x,{label:"E-mail",modelValue:n(t).data.email,"onUpdate:modelValue":e[1]||(e[1]=p=>n(t).data.email=p)},null,8,["modelValue"]),a(x,{label:"Senha",modelValue:n(t).data.password,"onUpdate:modelValue":e[2]||(e[2]=p=>n(t).data.password=p)},null,8,["modelValue"]),r("div",re,[a(h),a(V,{type:"submit"},{default:s(()=>[c("Login")]),_:1})])],32)]),register:s(u=>[r("form",{onSubmit:e[6]||(e[6]=R(p=>n(t).save(),["prevent"]))},[a(x,{label:"E-mail",modelValue:n(t).data.email,"onUpdate:modelValue":e[4]||(e[4]=p=>n(t).data.email=p)},null,8,["modelValue"]),a(x,{label:"Senha",modelValue:n(t).data.password,"onUpdate:modelValue":e[5]||(e[5]=p=>n(t).data.password=p)},null,8,["modelValue"]),a(x,{label:"Repita Senha"}),r("div",ue,[a(h),a(V,{type:"submit"},{default:s(()=>[c("Register")]),_:1})])],32)]),password:s(u=>[r("form",{onSubmit:e[8]||(e[8]=R(()=>{},["prevent"]))},[a(x,{label:"E-mail",modelValue:n(t).data.email,"onUpdate:modelValue":e[7]||(e[7]=p=>n(t).data.email=p)},null,8,["modelValue"]),r("div",pe,[a(h),a(V,{type:"submit"},{default:s(()=>[c("Password")]),_:1})])],32)]),_:3},8,["defaults-provider","ready"])]),_:3})}}};export{ge as default};
